# Copyright (c) 2009 Guilherme Semente and contributors
#
# This file is part of Django Smuggler.
#
# Django Smuggler is free software under terms of the GNU Lesser
# General Public License version 3 (LGPLv3) as published by the Free
# Software Foundation. See the file README for copying conditions.

import os
from pathlib import Path
from django.conf import settings
from django.dispatch import receiver
from django.test.signals import setting_changed

# Build paths inside the project like this: BASE_DIR / 'subdir'.
BASE_DIR = Path(__file__).resolve().parent.parent

SMUGGLER_EXCLUDE_LIST = getattr(settings, "SMUGGLER_EXCLUDE_LIST", ['auth.user', 
                                                                    'auth.user_groups', 
                                                                    'auth.user_user_permissions', 
                                                                    'auth.group', 
                                                                    'auth.group_permissions', 
                                                                    'auth.permission',])
SMUGGLER_FIXTURE_DIR = getattr(settings, "SMUGGLER_FIXTURE_DIR", 'Backups')
SMUGGLER_FORMAT = getattr(settings, "SMUGGLER_FORMAT", "json")
SMUGGLER_INDENT = getattr(settings, "SMUGGLER_INDENT", 2)

STATICFILES_DIRS = [os.path.join(BASE_DIR, 'Construimport-Server', 'static')]

@receiver(setting_changed)
def update_settings(setting=None, value=None, **kwargs):
    if setting and setting in globals():  # pragma: no branch
        globals()[setting] = value
